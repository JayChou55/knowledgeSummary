yum install docker

docker registry
	registry 是docker镜像中央存储仓库
docker info 查看信息
docker version

docker run 后面追加-d=true 或者-d 那么容器将会在后台模式运行
docker run没有指定--name 那么deamon会自动生成一个随机UUID

pid:容器有自己独立的进程表和1号进程
net:容器有自己独立的network info
ipc：在ipc通信的时候，需要加入额外信息来标示进程
mnt:每个容器有自己唯一的目录挂在
utc:每个容器有独立的hostname和domain


sed -i '/^SELINUX=/c\SELINUX=disabled' /etc/selinux/config
setenforce 0

搜索
docker search centos
获取镜像
docker pull
查看镜像 
dokcer images
删除镜像
docker rmi

查看运行的docker
docker ps -a 

启动容器
docker run --name -h hostname
停止容器 
docker stop CONTAINER ID
查看容器 
docker ps
进入容器
docker exec | docker attach
删除容器
docker rm CONTATINER ID

随机映射
docker run -d -P --name mynginx1 nginx
docker ps -l
指定映射
docker run -d -p 91:80 mynginx2 nginx 
-p hostPort:containerPort 
-p ip:hostPort:contatinerPort
-p ip::containerPort
-p hostPort:containerPort
-p hostPort:containerPort


安装
yum install docker or yum install -y docker-io


启动 Docker 服务

安装完成后，使用下面的命令来启动 docker 服务，并将其设置为开机启动：

service docker start
chkconfig docker on
 
docker search centos
docker pull centos 
docker run centos /bin/echo 'Hello world'

docker ps -a
docker run --name mydocker -it centos /bin/bash
docker run -d --name mynginx nginx  
	会返回容器id，如果没有nginx，会自动下载
	-d：后台运行

docker ps -l
docker statrt CONTAINER ID

=================推荐的进入容器的方法：=====================
docker inspect --format "{{.State.Pid}" mynginx 
获取这个容器的ID 如：32439

nsenter 进入容器 如果进入不了 yum install -y util-linux
nsenter --target 32439 --mount  --uts --ipc --net --pid 进入nginx容器 32439

./in.sh mynginx
==================网络==========================
iptables -t nat -L -n
./in.sh mynginx
ping www.baidu.com

ip ro li


============数据管理===========================
数据卷
	-v/data
	-v src:dst
数据卷容器
	--volumes-
	from

docker run -it --name volume-test1	-h nginx -v /data nginx
-i:终端保持打开状态
t:启动一个tty
-h：启动主机名
-v:数据卷

docker inspect -f {{.Volumes}} volume-test1
	
docker run -d -p 5000:5000 --name registry

生成docker镜像
docker build -t registry_url/namespace/csphere/centos:lastest
docker build -t csphere/centos:7.1 . 或者./path（path地址）

启动
	docker run -d 
	docker run -it
	docker run -d -P 2222:22 大P把2222端口映射给22，可能会变
	docker run -d -p 2222:22 小p把2222固定端口映射给22 
 docker build -t csphere/mysql:5.5 .
 
docker run -d -p 8080:80 --name website csphere/php-fpm:5.4	
docker run -d -p 3306:3306 --name dbserver csphere/mysql:5.5

docker exec -it dbserver /bin/bsah 进入交互模式 进入了dbserver 输入mysql 可以 运行mysql命令了 退出 exit

删除 docker rm -f dbserver 强制删除 这个容器

docker run -d -p 3306:3306 -v host_dir:container_dir
docker run -d -p 3306:3306 -v /var/lib/docker/vfs/dir/mydata:/var/lib/mysql csphere/mysql:5.5

docker exec -it d03 /bin/bash  
	-it后是 container id  通过这种方式进入容器